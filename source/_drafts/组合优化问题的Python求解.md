---
title: 组合优化问题的Python求解
---



# 组合优化问题的Python求解

最近发现了一篇文章，[《組合せ最適化を使おう》](https://qiita.com/SaitoTsutomu/items/bfbf4c185ed7004b5721)，感觉看上去写的还是很好的。但是咱不会多少日语呀，我能听懂、看懂的大概也就“大丈夫です”这个级别吧 hhhh。所以读这篇文章也就很痛苦了，所以我花了很长时间来参考百度、Google、DeepL 等机翻，加上我自己的一些理解写了这一篇。

（日语直接机翻中文总是怪怪的，好多地方我都是先机翻成英文，我再手动参照日文原文把英文翻成中文，然后还要把一些比较怪的例子本土化，还是很难的。。。）

---

## 引用

这篇文章介绍如何使用 Python 求解组合优化问题。

解决组合优化问题的窍门是~~顾全大局~~“了解大局”。知道有哪些元素以及它们之间的关系，将有助于你接近你要解决的问题。

通过 Python，你可以轻松地进行各种优化。 下面我们会看一些实际的代码，以及一些数学的原理。

首先，我们来看一个常见的优化问题例子。

## 想想看

>  城里买蔬菜很贵的，所以为了赚点小钱，前几天你回老家的时候，盘算着从乡下带点蔬菜回城里卖。但你的背包容量有限，你最多只能带5公斤的东西（不能用快递哈），而且你不能把菜切碎了，必须原模原样的带到城里。

你想了想，带什么菜比较好（赚得多）？是只选择带一种每公斤售价最高的嘛？ 其实，这并不是最优方法。这是「贪心算法」，虽然这个方法可以快速得到一个让人比较满意的解，但一般不是最优解。

那我们怎么知道什么才是真正适合自己的、最优解呢？我们可以穷举。如果考虑所有可能性，那么就可以得到最优的组合了。但是，随着蔬菜数量的增加，所有蔬菜组合可能情况太多了，直接爆炸，无法进行计算。

贪心、穷举都不理想，所以我们需要一种新的方法，**数学优化** 就是用于解决此类问题的。

数学优化使用数学表达式（**数学模型**）来表达一个问题。将问题表示为数学模型称为公式化。比如前面的例子是：
$$
\max \sum_{i}p_ix_i
$$

$$
s.t.\left\{
\begin{array}{l}
\sum_iw_ix_i\le5\\
\forall x_i \in \{0,1\}
\end{array}
\right.
$$



其中，$p_i$ 是菜的售价，$w_i$ 是重量，$x_i$ 是要不要带这个菜回城里。

上面这就是一个数学模型。一般来说，数学优化分为两类：**连续优化**和**组合优化**。

- **连续优化**：仅连续元素
- **组合优化**：包含不连续的离散元素

数学优化（组合和连续优化）问题都是可以用数学模型来表示的。在本文中，我将重点介绍组合优化。

## 公式化

### 第一课

> 建立组合优化问题的数学模型。

在将问题公式化的过程中，我们首先需要确定的是三个要素：

| 要素                        | 实例                              |
| --------------------------- | --------------------------------- |
| 1. 您要决定（优化）的什么？ | “我想决定带多少蔬菜回家。”        |
| 2. 您希望达到什么样的目标？ | “我希望带回家的蔬菜总售价很高。🤑” |
| 3. 您必须满足的条件是什么？ | “我只能带回少于5公斤的蔬菜。”     |

这三个要素分别称为**变量**，**目标函数**和**约束条件**。对于前面的例子，具体来说，这三个要素就是：

|   要素   | 值                      |            |
| :------: | ----------------------- | ---------- |
|   变量   | $\forall x_i\in\{0,1\}$ |            |
| 目标函数 | $\sum_{i}p_ix_i$        | $\to$ 最大 |
| 约束条件 | $\sum_iw_ix_i\le5$      |            |

对于把问题公式化，其实是需要遵循一定的习惯的，我将在后面看一些示例。如果您想详细研究，请参阅[「今日から使える!組合せ最適化」](http://www.amazon.co.jp/dp/4061565443)（日文书哦，好像没其他译本）。

