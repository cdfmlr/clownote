# 使用Python解释器

[TOC]

## 开始之前

我很长时间之前就打算写一个系列的文章，以一个非初学者的视角讨论 Python 基础，在研究、整理和写作的过程中夯实基础，提升技能。

这个系列暂定名为《Python基础手册》。这更像是一本给自己的 Python 操作手册，一本 My version 的 Python Cookbook，而不是从入门到进阶的初学者指南。

看看基础，写写实例，读读源码，再作成笔记，希望助更多学习 Python 的朋友一臂之力。

---

既然不是面向初学者，那就需要读者有一定的基础。比如，在阅读本文前，您应该懂得命令行的使用，如果这方面的知识您有所欠缺，我推荐您学习 Zed A. Shaw 的《命令行快速入门》（您可以在 [Zed A. Shaw 的网站](https://learnpythonthehardway.org/book/appendixa.html) 上阅读这一内容）。

## 启动

* `$ python`: 进入交互式环境。
* `$ python -`: 脚本名指定为 '-' （表示标准输入），与`$ python`等效。
* `$ python -c command [arg] ...`: 在命令行执行 Python 语句，类似于 shell 中的 -c 选项。用'单引号'包裹command，其中写python语句，类似于awk。
* `$ python -m module [arg] ...`: 有一些 Python 模块也可以当作脚本使用。这类似在命令行中键入完整的路径名执行模块源文件一样。
* `$ python filename`: 执行python源文件。
* `$ python -i filename`: 执行python源文件，然后不退出，留在python交互式命令行。

## 退出

* 输入一个文件结束符（Unix 系统是 `Control-D`，Windows 系统是 `Control-Z`）让解释器以 0 状态码退出。
* 输入 `quit()` 命令退出解释器。
* 输入 `exit()` 命令退出解释器。

## 命令行参数传递

调用解释器时，脚本名和附加参数传入一个名为 `sys.argv` 的字符串列表，这类似于C语言main函数的 `char *argv[]`。

取用 `sys.argv` 前要 `import sys`。

关于 argv 的行为，我们借用C/C++的 switch-case 语句的形式来讨论：

```c
switch (输入命令) {
    case "$ python": 
        // sys.argv 有一个元素：sys.argv[0] 此时为空字符串
        break;
    case "$ python -":
        // sys.argv[0] 被设定为 '-'
        break;
    case "$ python -c command [arg] ...":
        // sys.argv[0] 被设定为 '-c'
        break;
    case "$ python -m module [arg] ...":
        // sys.argv[0] 被设定为指定模块的全名
        break;
}
/* 
注意C/C++的这个语句switch后面括号内的“表达式”必须是整数类型！
*/
```

⚠️【注意】：`-c` 指令 或者 `-m` 模块 之后的参数不会被 Python 解释器的选项处理机制所截获，而是留在 `sys.argv` 中，供脚本命令操作。
例如：

```
$ python3 -i -c 'import sys' 1 2 3
>>> sys.argv
['-c', '1', '2', '3']
```

## 指定源程序编码
默认情况下，Python 源文件是 UTF-8 编码。
在 `#!` 行（首行）后插入至少一行特殊的注释行来定义源文件的编码:

```
# -*- coding: encoding -*-
```
[可用的 encoding 列表](https://docs.python.org/3/library/codecs.html#module-codecs)

⚠️【注意】如果使用 Microsoft Windows 自带的 记事本（‘Notepad’）进行 python 源码的编辑，注意使用 `utf-8 without BOM` 编码！



---

Next part：《Python 基础语法》